# –í–µ–±–∏–Ω–∞—Ä "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MLflow –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥–µ–ª–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è"

## –ö—É—Ä—Å "–ò–Ω–∂–µ–Ω–µ—Ä –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è", –Ø–Ω–¥–µ–∫—Å –ü—Ä–∞–∫—Ç–∏–∫—É–º

>### –û–ø–∏—Å–∞–Ω–∏–µ –∫–µ–π—Å–∞

–í–∞—à –±—ã–≤—à–∏–π –∫–æ–ª–ª–µ–≥–∞ —É—à–µ–ª –≤ –æ—Ç–ø—É—Å–∫. –ê –∑–∞–∫–∞–∑—á–∏–∫ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —É–∂–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ. –°–µ–≥–æ–¥–Ω—è –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç:

1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –∫–æ–ª–ª–µ–≥–∏
2. –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —ç—Ç–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ MLFlow
4. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å-–≤—ã–≥—Ä—É–∑–∫—É –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞

> –ù–∞–ø–æ–º–∏–Ω–∞—é: –î–µ–¥–ª–∞–π–Ω –±—ã–ª –≤—á–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –±—ã—Å—Ç—Ä–µ–µ –∑–∞ —Ä–∞–±–æ—Ç—É)

>### –ù–µ–º–Ω–æ–≥–æ –æ –¥–∞–Ω–Ω—ã—Ö

1. –î–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–µ `data`
2. –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –≤—ã–≥—Ä—É–∑–∫–∏ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –ø–æ–∏—Å–∫ —Å–∞—Ä–∫–∞–∑–º–∞
3. –§–∞–π–ª `Sarcasm_Headlines_Dataset_v2.json` -- –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
4. –§–∞–π–ª `Sarcasm_Headlines_Dataset.json` -- –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –º–æ–¥–µ–ª–∏

>### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–µ–∫—Ç–æ–º?

>#### 1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

1. –ß—Ç–æ–±—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –∫–æ–ø–∏—é. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ `fork`.

2. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–≤–æ—ë –ª–æ–∫–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–æ –ª—É—á—à–µ –≤—Å–µ-—Ç–∞–∫–∏ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ):

~~~
git clone <–∞–¥—Ä–µ—Å –≤–∞—à–µ–π –∫–æ–ø–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
~~~

3. –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –≤–µ—Ç–∫—É:

~~~
git checkout -b <–∏–º—è –Ω–æ–≤–æ–π –≤–µ—Ç–∫–∏>
~~~

4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω—É–∂–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

~~~
python -m venv <–∏–º—è –ø–∞–ø–∫–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è>
source <–∏–º—è –ø–∞–ø–∫–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è>/bin/activate
python -m pip install --upgrade pip
pip install -r requirements.txt
~~~

P.S. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–≥—É—Ç –º–µ—à–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—É –∏–ª–∏ –∏–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É. –î–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ª–µ—Ç–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π, –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ `--no-deps` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –¢–æ–≥–¥–∞ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–º–µ—Ç –≤–∏–¥:

~~~
pip install -r requirements_2.txt --no-deps
~~~

5. (**–î–ª—è –≤–æ—Ä–∫—à—Ä–ø–∞**) –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ `.env_template_for_workshop` —Ñ–∞–π–ª –≤ `.env`. –¢–∞–∫ –∫–∞–∫ –≤—ã –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–Ω—ã –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

5. (**–î–ª—è –¥–æ–º–∞—à–Ω–µ–π —Ä–∞–±–æ—Ç—ã**) –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ `.env_templatefor_homework` —Ñ–∞–π–ª –≤ `.env`. –¢–∞–∫ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—É—Å–∫ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ –í–ú. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –≤–∞—à–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ S3 –∏ PostgreSQL —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

6. –î–ª—è –∑–∞–ø—É—Å–∫–∞ Tracking Server –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `sh run_public.sh`.

7. –ì–æ—Ç–æ–≤–æ! –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ Tracking Server.

>#### 2. –ß—Ç–æ –∂–µ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≥–æ—Ç–æ–≤–æ? (**–¢–æ–ª—å–∫–æ –Ω–∞ –≤–µ–±–∏–Ω–∞—Ä–µ**)

–í–∞—à –∫–æ–ª–ª–µ–≥–∞ —É—Å–ø–µ–ª –æ–±—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö –ø–∞–π–ø–ª–∞–Ω–æ–≤, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ–ª –ø–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
![image](pictures/Experiments.png)

–í —Ö–æ–¥–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–ª–µ–≥–∞ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –º–µ—Ç—Ä–∏–∫—É –∫–∞—á–µ—Å—Ç–≤–∞. –ù–æ –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –∑–∞ –º–µ—Ç—Ä–∏–∫–∞ –∏ –ø–æ—á–µ–º—É –æ–Ω –≤—ã–±—Ä–∞–ª –∏–º–µ–Ω–Ω–æ –µ–µ.
![image](pictures/Metrics.png)

–†–∞–¥—É–µ—Ç —Ç–æ—Ç —Ñ–∞–∫—Ç, —á—Ç–æ –æ–Ω –æ—Å—Ç–∞–≤–∏–ª —Ö–æ—Ç—è –±—ã –∫–∞–∫—É—é-—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏ –Ω–∞–º –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–∞—á–∏–Ω–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞.

**P.S.** –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —É –≤–∞—Å –ø–æ—è–≤–∏–ª–∏—Å—å —Ç–µ –∂–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, —á—Ç–æ –∏ –≤ —Ö–æ–¥–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —è—á–µ–π–∫–∏ –Ω–æ—É—Ç–±—É–∫–∞ `sarcasm.ipynb`

>#### 3.1. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ (**–ù–∞ –≤–µ–±–∏–Ω–∞—Ä–µ**)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä MLflow (–Ω—É–∂–Ω–æ –ø–æ—Å—Ç—É—á–∞—Ç—å—Å—è –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É <http://84.201.139.14:5000>)
2. –í—ã–±–µ—Ä–∏—Ç–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç, –ø–æ–ª—É—á–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥–µ–ª—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤ –Ω—ë–º —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è.
    - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ—É—Ç–±—É–∫ —Å –ª—é–±—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã.
    - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å
    - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –º–æ–¥–µ–ª–∏ –Ω–∞ –ª—é–±–æ–º –∫—É—Å–æ—á–∫–µ –¥–∞–Ω–Ω—ã—Ö
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª MLproject. –°–¥–µ–ª–∞–π—Ç–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º, –¥–æ–±–∞–≤–∏–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ entry_points (–ø—Ä–∏–º–µ—Ä—ã entry_points –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ)
    - –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å `click` –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@click.option()` & `@click.command()`
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ MLproject, –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ ¬´production¬ª
    - –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ (–≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–º–µ–Ω–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <'sarcasm_' + –∏–Ω–∏—Ü–∞–ª—ã>)
    - –í –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mlflow run . --entry-point <entry-point name>`
    - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ 2 –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç—Ç–∞–ø–∞ `prepare_data` & `baseline_model`
    - –ï—Å–ª–∏ –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∞–ø optuna –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Ç 2 –¥–æ 12 –º–∏–Ω—É—Ç
    - –í –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Sarcasm_Headlines_Dataset.json`
5. –ò–∑–º–µ–Ω–∏—Ç–µ `staging` –º–æ–¥–µ–ª–µ–π (–ø—Ä–∏–º–µ—Ä—ã –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª–µ `test.ipynb`)

>#### 3.2. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ (**–ù–∞ –≤–µ–±–∏–Ω–∞—Ä–µ**)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä MLflow (–ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —Ç–æ <127.0.0.1:5000>)
2. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –≤ –Ω–æ—É—Ç–±—É–∫–µ `test.ipynb`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ MLproject, –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ ¬´production¬ª
    - –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ (–≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–º–µ–Ω–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∞–ª—ã)
    - –í –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mlflow run . --entry-point <entry-point name>`
    - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ 2 –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç—Ç–∞–ø–∞ `prepare_data` & `baseline_model`
    - –ï—Å–ª–∏ –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∞–ø optuna –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Ç 2 –¥–æ 12 –º–∏–Ω—É—Ç
    - –í –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Sarcasm_Headlines_Dataset.json`, —á—Ç–æ–±—ã –∑–∞–¥–∞–Ω–∏–µ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–æ—Å—å —Å –≤–æ–∫—Ä—à–æ–ø–æ–º
    **P.S.** –í –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–ª–∞–≥–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `mlflow run . --entry-point baseline --env-manager local`, —Ç–∞–∫ –∫–∞–∫ –≤ `mlflow run` –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–æ–∫–µ—Ä
5. –ò–∑–º–µ–Ω–∏—Ç–µ `staging` –º–æ–¥–µ–ª–µ–π (–ø—Ä–∏–º–µ—Ä—ã –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª–µ `test.ipynb`)
6. –í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–µ—Ç–µ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –∏–ª–∏ —Å–∫–∏–Ω—É—Ç—å —Å–≤–æ—é –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ `test.ipynb`.

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**

1. –í –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ (–≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –≤ –∫–æ–Ω—Ü–µ –æ–ø–∏—Å–∞–Ω–∏—è):
    - –î–ª—è —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤—å—Ç–µ `entry_point "main"`
    - –ü–∞–π–ø–ª–∞–π–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö, –æ–±—É—á–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏, –ø–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω—É–∂–µ–Ω –≤—ã–∑–æ–≤ –≤—Å–µ—Ö —Ç—Ä–µ—Ö `entry_points`

>#### 3.3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–∏–∫—Ç–æ–≤ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é

**–ü—Ä–µ–¥–∏–∫—Ç –º–æ–¥–µ–ª–∏ –Ω–∞ Spark –¥–∞—Ç–∞—Ñ—Ä–µ–º–∞—Ö**

~~~
import mlflow
from pyspark.sql.functions import struct, col
logged_model = 'runs:/e1785754ad8b46f7ba7cb722d1add4d1/via_models'

# Load model as a Spark UDF. Override result_type if the model does not return double values.
loaded_model = mlflow.pyfunc.spark_udf(spark, model_uri=logged_model, result_type='double')

# Predict on a Spark DataFrame.
df.withColumn('predictions', loaded_model(struct(*map(col, df.columns))))
~~~

**–ü—Ä–µ–¥–∏–∫—Ç –º–æ–¥–µ–ª–∏ –Ω–∞ Pandas –¥–∞—Ç–∞—Ñ—Ä–µ–º–∞—Ö**

~~~
import mlflow
logged_model = 'runs:/e1785754ad8b46f7ba7cb722d1add4d1/via_models'

# Load model as a PyFuncModel.
loaded_model = mlflow.pyfunc.load_model(logged_model)

# Predict on a Pandas DataFrame.
import pandas as pd
loaded_model.predict(pd.DataFrame(data))
~~~

>#### 4. –®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥–∏—Ç–æ–º

1. –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω–¥–µ–∫—Å:

~~~
git add .
~~~

2. –°–æ–∑–¥–∞—ë–º –∫–æ–º–º–∏—Ç:

~~~
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ"
~~~

3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

~~~
git push
~~~

–ï—Å–ª–∏ –≤—ã –ª–æ–∫–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É, —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ git —Å–∞–º –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –∫–∞–∫ –µ—ë –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ç–∫—É. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å :)

>#### 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

==============================

    ‚îú‚îÄ‚îÄ README.md 
    ‚îÇ         
    ‚îú‚îÄ‚îÄ data               <- –ü–∞–ø–∫–∞ c –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    ‚îÇ
    ‚îú‚îÄ‚îÄ notebooks          <- –ù–æ—É—Ç–±—É–∫ —Å —Ä–∞–∑–≤–µ–¥–æ—á–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ
    ‚îú‚îÄ‚îÄ src                <- –ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –ø–æ–¥ —Å–∫—Ä–∏–ø—Ç—ã
    ‚îÇ
    ‚îú‚îÄ‚îÄ requirements.txt   <- –§–∞–π–ª —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
    ‚îÇ
    ‚îú‚îÄ‚îÄ python_venv.yaml   <- –û–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è MLflow
    ‚îÇ
    ‚îú‚îÄ‚îÄ .env_template      <- –§–∞–π–ª —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–∞—à–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–µ–≥–æ —Å–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
    ‚îÇ
    ‚îî‚îÄ‚îÄ MLProject          <- –°—É—â–Ω–æ—Å—Ç—å –¥–ª—è –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω–æ–π —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ–ª–µ–π            

-----------------

>#### 6. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫

–¢–∞–∫ –∫–∞–∫ –æ—à–∏–±–∫–∏ –Ω–µ–∏–∑–±–µ–∂–Ω—ã, –ø—Ä–µ–¥–ª–∞–≥–∞—é –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≤–µ–±–∏–Ω–∞—Ä–µ:

1. –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å. –í–µ—Ä–æ—è—Ç–Ω–æ –∫—Ç–æ-—Ç–æ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å —Ç–∞–∫–æ–π –∂–µ –ø—Ä–æ–±–ª–µ–º–æ–π, –≤–º–µ—Å—Ç–µ –º—ã —Å–º–æ–∂–µ–º —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –±—ã—Å—Ç—Ä–µ–µ.
2. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–∫–∏–Ω—É—Ç—å —Å–∫—Ä–∏–Ω—ã –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –Ω–∞–ø–∏—Å–∞–ª–∏ –∏ –º–µ—Å—Ç–æ —Å –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ —Ç–∞–∫–æ–µ –∏–º–µ–µ—Ç—Å—è.

–ï—Å–ª–∏ –≤—ã –ø–æ–ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –≤–µ–±–∏–Ω–∞—Ä–∞:

1. –ü–æ–≥—É–≥–ª–∏—Ç–µ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∫—Ç–æ-—Ç–æ —É–∂–µ –ø—ã—Ç–∞–ª—Å—è —ç—Ç–æ —Ä–µ—à–∏—Ç—å.

2. –ï—Å–ª–∏ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –Ω–∞–≥—É–≥–ª–∏–ª–∏, –∏–ª–∏ –Ω–µ –Ω–∞–≥—É–≥–ª–∏–ª–∏ –≤–æ–≤—Å–µ, –ø—Ä–µ–¥–ª–∞–≥–∞—é 2 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞:

    - —Å–æ–∑–¥–∞—Ç—å —Ç–µ–º—É —Å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ–º –Ω–∞ GitHub –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç—å —Å–≤–æ—é –æ—à–∏–±–∫—É, –º—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –≤–∞–º –ø–æ–º–æ—á—å.
    - –°–æ–∑–¥–∞–π—Ç–µ PullRequest –≤ `main` –∏ –≤–Ω—É—Ç—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ—é –æ—à–∏–±–∫—É, —Ç–æ–≥–¥–∞ –º—ã —Å–º–æ–∂–µ–º –ø–æ–º–æ—á—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–µ–µ. –ú—ã —Å–º–æ—Ç—Ä–∏–º –≤–∞—à–∏ –ø—É–ª—Ä–µ–∫–≤–µ—Å—Ç—ã.

>#### 7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–£ MLflow –Ω–∞–≤–µ—Ä–Ω–æ–µ —Å–∞–º–∞—è –ø–æ–Ω—è—Ç–Ω–∞—è –∏ –∞–¥–µ–∫–≤–∞—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –º–∏—Ä–µ, —Ç–∞–∫ —á—Ç–æ —Å–º–µ–ª–æ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–µ–π.

–¢–∞–∫ –∂–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã, –≤–æ—Ç –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö <https://github.com/mlflow/mlflow/blob/master/examples/multistep_workflow/MLproject>


> ## –ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ–ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –≤ —Ä–∞–±–æ—Ç–µ —Å MLflow –∏ –∑–∞–ø—É—Å–∫–æ–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ ü•∏
